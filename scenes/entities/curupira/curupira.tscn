[gd_scene load_steps=7 format=3 uid="uid://44pl00dmjnhj"]

[ext_resource type="Script" uid="uid://dmmxrlifbb5ig" path="res://scenes/entities/curupira/curupira.gd" id="1_jqsci"]
[ext_resource type="PackedScene" uid="uid://kf8tqdlm8c5t" path="res://addons/vision_cone_2d/vision_cone_2d_template.tscn" id="1_t8wdx"]
[ext_resource type="Texture2D" uid="uid://cptjb58b56ipm" path="res://addons/vision_cone_2d/icon.png" id="2_jqsci"]
[ext_resource type="PackedScene" uid="uid://bulute7i5ksyy" path="res://addons/vision_cone_2d/examples/enemy.tscn" id="4_47mdb"]

[sub_resource type="CircleShape2D" id="CircleShape2D_47mdb"]
radius = 134.41

[sub_resource type="SpriteFrames" id="SpriteFrames_6lwxt"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_jqsci")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[node name="Curupira" type="CharacterBody2D"]
script = ExtResource("1_jqsci")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_47mdb")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
sprite_frames = SubResource("SpriteFrames_6lwxt")

[node name="VisionCone2D2" parent="." instance=ExtResource("1_t8wdx")]
rotation = -1.5708
angle_deg = 65
recalculate_if_static = false

[node name="Enemy2" parent="." instance=ExtResource("4_47mdb")]
position = Vector2(301, 705)
rotation = -1.5708
scale = Vector2(1, 0.900223)
is_rotating = true
rotation_speed = 1.0

[node name="VisionCone2D" parent="Enemy2" index="1"]
angle_deg = 45
ray_count = 50
max_distance = 700
recalculate_if_static = true

[node name="Explanation" type="Label" parent="Enemy2"]
visible = false
offset_left = 18.0
offset_top = 13.0
offset_right = 260.0
offset_bottom = 39.0
text = "Narrow vision cone (<360 deg)
The target is rotating so the vision cone has to be recalculated even if the character is static
Since the vision cone is smaller than the one with 360 vision, we can use less rays and save on performance"

[editable path="VisionCone2D2"]
[editable path="Enemy2"]
[editable path="Enemy2/VisionCone2D"]
